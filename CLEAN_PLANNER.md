# ğŸ¯ Clean Interactive Holiday Planner

A step-by-step interactive AI planner that waits for user input at each stage to create the perfect group outing.

## ğŸŒŸ What's Different?

This is a **clean, user-friendly version** that:
- âœ… Waits for user input at EVERY stage
- âœ… Shows multiple options to choose from
- âœ… Checks weather before suggesting places
- âœ… Gets Reddit insider tips for chosen location
- âœ… Provides complete budget breakdown per person
- âœ… Plans round-trip transportation
- âœ… Beautiful formatted timeline

## ğŸ”„ Complete Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: Calendar Integration (Optional) â”‚
â”‚ â€¢ Ask users to connect calendars        â”‚
â”‚ â€¢ Wait 30 seconds for connections       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: Show Multiple Dates             â”‚
â”‚ â€¢ Present 3 date options                â”‚
â”‚ â€¢ â³ WAIT for user to choose date       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Check Weather/Climate           â”‚
â”‚ â€¢ Get forecast for chosen date          â”‚
â”‚ â€¢ Show temperature, conditions          â”‚
â”‚ â€¢ Give weather-appropriate suggestions  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Suggest Places                  â”‚
â”‚ â€¢ Ask activity type preference          â”‚
â”‚ â€¢ â³ WAIT for user response             â”‚
â”‚ â€¢ Find locations matching weather       â”‚
â”‚ â€¢ Show top 3 options with details       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Choose Location                 â”‚
â”‚ â€¢ â³ WAIT for location choice           â”‚
â”‚ â€¢ Confirm chosen location               â”‚
â”‚ â€¢ Get Reddit insider tips               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: Show Restaurant Options         â”‚
â”‚ â€¢ Ask cuisine preference                â”‚
â”‚ â€¢ â³ WAIT for cuisine choice            â”‚
â”‚ â€¢ Ask budget level                      â”‚
â”‚ â€¢ â³ WAIT for budget                    â”‚
â”‚ â€¢ Find restaurants near location        â”‚
â”‚ â€¢ Show top 3 options                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 7: Choose Restaurant               â”‚
â”‚ â€¢ â³ WAIT for restaurant choice         â”‚
â”‚ â€¢ Confirm chosen restaurant             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 8: Plan Transportation             â”‚
â”‚ â€¢ Calculate route TO location           â”‚
â”‚ â€¢ Calculate route FROM location         â”‚
â”‚ â€¢ Show both options with costs          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 9: Complete Timeline               â”‚
â”‚ â€¢ Date & time                           â”‚
â”‚ â€¢ Weather forecast                      â”‚
â”‚ â€¢ Outbound transportation               â”‚
â”‚ â€¢ Location with activities              â”‚
â”‚ â€¢ Reddit insider tips                   â”‚
â”‚ â€¢ Restaurant details                    â”‚
â”‚ â€¢ Return transportation                 â”‚
â”‚ â€¢ COMPLETE budget per person            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 10: Final Confirmation             â”‚
â”‚ â€¢ â³ WAIT for YES/NO confirmation       â”‚
â”‚ â€¢ Send confirmed plan or ask changes    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Quick Start

### 1. Run the Planner

```bash
npm run clean-plan
```

### 2. What Happens

The bot will guide your group through each step, **waiting for responses** at:
- Date selection (3 options)
- Activity type preference
- Location choice (3 options)
- Cuisine preference
- Budget level
- Restaurant choice (3 options)
- Final confirmation

## ğŸ“‹ Example Output

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸ‰ YOUR COMPLETE OUTING PLAN      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… DATE & TIME
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“† 2025-11-29 (This Saturday)
â° 10:00 AM - 4:00 PM
ğŸ‘¥ 4 people

ğŸŒ¤ï¸  WEATHER FORECAST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Partly Cloudy
ğŸŒ¡ï¸  Temperature: 12Â°C - 18Â°C
ğŸ’§ Humidity: 65%
ğŸ’¡ Perfect weather for outdoor activities!

ğŸš— OUTBOUND TRANSPORTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
From: Downtown San Francisco
To: Golden Gate Park
Method: Uber XL
Duration: 25 minutes
ğŸ’° Cost: $15/person

ğŸ“ MAIN LOCATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ Golden Gate Park
ğŸ“ 501 Stanyan St, San Francisco
ğŸª Activities: hiking, picnicking, photography, biking
ğŸ’° Entry Fee: $0/person

ğŸ“± REDDIT INSIDER TIPS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ Best parking is near Japanese Tea Garden
â€¢ Visit the botanical gardens - they're free!
â€¢ Pack a picnic, food vendors are expensive

ğŸ½ï¸  RESTAURANT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ´ Mama's on Washington Square
ğŸŒ® Cuisine: Italian
â­ Rating: 4.5/5
ğŸ’° Cost: $45/person

ğŸš— RETURN TRANSPORTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
From: Golden Gate Park
To: Downtown San Francisco
Method: Uber XL
Duration: 25 minutes
ğŸ’° Cost: $15/person

ğŸ’° COMPLETE COST BREAKDOWN
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš— Outbound Transport:  $15.00/person
ğŸ“ Location & Entry:    $0.00/person
ğŸ½ï¸  Restaurant & Food:  $45.00/person
ğŸš— Return Transport:    $15.00/person
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’µ TOTAL PER PERSON:    $75.00
ğŸ’° TOTAL FOR GROUP:     $300.00
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

## ğŸ¯ Key Features

### 1. Multiple Date Options
- Shows 3 upcoming Saturdays
- Users vote on preferred date
- Clear labels (This Saturday, Next Saturday, etc.)

### 2. Weather-Based Suggestions
- Real weather forecast for chosen date
- Temperature, humidity, precipitation
- Activity recommendations based on conditions

### 3. Location Selection with Options
- 3 location choices presented
- Full details: address, activities, cost
- Based on weather and user preferences

### 4. Reddit Insider Tips
- Real tips from Reddit for chosen location
- Local knowledge and hidden gems
- Best times, parking, things to avoid

### 5. Restaurant Options
- 3 restaurant choices near location
- Filtered by cuisine preference
- Budget-appropriate options
- Ratings and cost per person

### 6. Complete Transportation
- **Outbound**: Getting TO the location
- **Return**: Getting back FROM location
- Method, duration, and cost for each
- Budget-appropriate options

### 7. Complete Budget Breakdown
```
ğŸš— Outbound Transport:  $15.00/person
ğŸ“ Location & Entry:    $10.00/person
ğŸ½ï¸  Restaurant & Food:  $45.00/person
ğŸš— Return Transport:    $15.00/person
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’µ TOTAL PER PERSON:    $85.00
ğŸ’° TOTAL FOR GROUP:     $340.00
```

## â±ï¸ Timeouts

- Calendar integration: 30 seconds
- Date choice: 3 minutes
- Activity preference: 3 minutes
- Location choice: 3 minutes
- Cuisine preference: 3 minutes
- Budget: 3 minutes
- Restaurant choice: 3 minutes
- Final confirmation: 5 minutes

## ğŸ”§ Configuration

Edit the planner constants in `clean-interactive-planner.ts`:

```typescript
const city = 'San Francisco'  // Change to your city
const participants = ['user1', 'user2', 'user3', 'user4']
```

## ğŸ“± Required Environment Variables

```bash
# Required
GEMINI_API_KEY=your-gemini-api-key
GROUP_CHAT_ID=chat123...

# Optional (for enhanced features)
SERPAPI_KEY=your-serpapi-key  # For better maps/transportation
```

## ğŸ†š Comparison: Clean Planner vs Simple Trial

| Feature | Simple Trial | Clean Planner |
|---------|-------------|---------------|
| Date Selection | Auto (next Saturday) | 3 options to choose |
| Weather Check | âœ… Shows | âœ… Shows + suggests activities |
| Location Options | 1 auto-selected | 3 to choose from |
| Reddit Tips | âœ… Included | âœ… Included |
| Restaurant Options | 1 auto-selected | 3 to choose from |
| Budget Input | Single question | Separate for food |
| Transportation | Round-trip âœ… | Round-trip âœ… |
| Wait Times | Minimal | At every step |
| User Control | Low | High |

## ğŸ¨ Customization

### Change Number of Options

```typescript
// Show 5 date options instead of 3
for (let i = 1; i <= 5; i++) {
    // ... date generation
}

// Show 5 location options
const locationList = Array.isArray(locations) ? locations.slice(0, 5) : [locations]
```

### Adjust Timeouts

```typescript
// Longer timeout for date choice (5 minutes instead of 3)
const dateChoices = await interactive.askGroupQuestion(
    `Waiting for date choice...`,
    300000 // 5 minutes
)
```

### Change Default City

```typescript
const city = 'New York'  // or 'Los Angeles', 'Chicago', etc.
```

## ğŸš¨ Error Handling

The planner handles:
- âœ… No responses (uses sensible defaults)
- âœ… Invalid choices (uses first option)
- âœ… Timeouts (continues with defaults)
- âœ… API failures (graceful fallbacks)

## ğŸ¯ Best Practices

1. **Run during active hours** - Users need to respond
2. **Have backup plans** - Bot continues with defaults if no response
3. **Test first** - Try with a small test group
4. **Monitor console** - Shows real-time progress
5. **Check env vars** - Ensure all API keys are set

## ğŸ” Troubleshooting

**No responses received?**
- Check group chat ID is correct
- Ensure iMessage is running
- Verify participants can receive messages

**Weather not showing?**
- Weather API might be rate-limited
- Will show generic forecast if API fails

**Transportation costs seem high/low?**
- With SERPAPI_KEY: Real Google Maps data
- Without: AI estimates (less accurate)

**Reddit tips not showing?**
- Some locations might not have Reddit posts
- Bot will show generic tips

## ğŸ“š Learn More

- See `AGENTS.md` for agent architecture
- See `README.md` for setup instructions
- See `examples/simple-trial.ts` for simpler version

---

**Ready to plan your perfect outing? Run `npm run clean-plan`!** ğŸ‰
